<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>TournamentView.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">playarena</a> &gt; <a href="index.source.html" class="el_package">com.playarena.app.view</a> &gt; <span class="el_source">TournamentView.java</span></div><h1>TournamentView.java</h1><pre class="source lang-java linenums">package com.playarena.app.view;

import com.playarena.app.enums.Difficulty;
import com.playarena.app.enums.Status;
import com.playarena.app.model.Game;
import com.playarena.app.model.Tournament;
import com.playarena.app.service.GameService;
import com.playarena.app.service.impl.TournamentServiceImpl;
import com.playarena.app.util.InputValidator;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.context.ApplicationContext;

import java.util.Date;

<span class="nc" id="L16">public class TournamentView {</span>
<span class="nc" id="L17">    private static final Logger log = LoggerFactory.getLogger(TournamentView.class);</span>
<span class="nc" id="L18">    private static InputValidator input = new InputValidator();</span>
    private static TournamentServiceImpl tournamentService;

    public static void display(ApplicationContext context) {
<span class="nc" id="L22">        tournamentService = (TournamentServiceImpl) context.getBean(&quot;tournamentService&quot;);</span>

<span class="nc" id="L24">        System.out.println(menu());</span>
<span class="nc" id="L25">        int choice = input.getNum(&quot;Enter your choice&quot;);</span>
<span class="nc bnc" id="L26" title="All 6 branches missed.">        switch (choice) {</span>
            case 1:
<span class="nc" id="L28">                addTournament(context);</span>
<span class="nc" id="L29">                break;</span>
            case 2:
<span class="nc" id="L31">                tournamentService.getAllTournaments().forEach(Tournament::display);</span>
<span class="nc" id="L32">                break;</span>
            case 3:
<span class="nc" id="L34">                updateTournament();</span>
<span class="nc" id="L35">                break;</span>
            case 4:
<span class="nc" id="L37">                removeTournament();</span>
<span class="nc" id="L38">                break;</span>
            case 5:
<span class="nc" id="L40">                log.info(&quot;Exiting tournament menu ...&quot;);</span>
<span class="nc" id="L41">                return;</span>
            default:
<span class="nc" id="L43">                log.error(&quot;[-] Invalid choice.&quot;);</span>
<span class="nc" id="L44">                display(context);</span>
                break;
        }

<span class="nc" id="L48">        display(context);</span>
<span class="nc" id="L49">    }</span>

    private static void addTournament(ApplicationContext context) {
<span class="nc" id="L52">        String title = input.getStr(&quot;Tournament Title&quot;);</span>
<span class="nc" id="L53">        Date startDate = input.getDate(&quot;Start Date (DD/MM/YYYY)&quot;, false);</span>
<span class="nc" id="L54">        Date endDate = null;</span>
        while (true){
<span class="nc" id="L56">            endDate = input.getDate(&quot;End Date (DD/MM/YYYY)&quot;, false);</span>
<span class="nc bnc" id="L57" title="All 2 branches missed.">            if (endDate.after(startDate)) {</span>
<span class="nc" id="L58">                break;</span>
<span class="nc" id="L59">            } else log.warn(&quot;End date cannot be before start date.&quot;);</span>
        }
<span class="nc" id="L61">        int spectatorsCount = input.getNum(&quot;Spectators Count&quot;);</span>
<span class="nc" id="L62">        int estimatedDuration = input.getNum(&quot;Estimated Duration (in minutes)&quot;);</span>
<span class="nc" id="L63">        int matchPauseTime = input.getNum(&quot;Match Pause Time (in minutes)&quot;);</span>
<span class="nc" id="L64">        int ceremonyTime = input.getNum(&quot;Ceremony Time (in minutes)&quot;);</span>
<span class="nc" id="L65">        Status status =  input.getEnum(&quot;Status (SCHEDULED, IN_PROGRESS, COMPLETED, CANCELED)&quot;, Status.class);</span>

<span class="nc" id="L67">        Tournament tournament = new Tournament(title, startDate, endDate, spectatorsCount, estimatedDuration, matchPauseTime, ceremonyTime, status);</span>
<span class="nc" id="L68">        GameService gameService = (GameService) context.getBean(&quot;gameService&quot;);</span>
<span class="nc" id="L69">        boolean assignToGame = input.getYesNo(&quot;Do you want to assign this tournament to and existing game? (Y/N: adding new game) : &quot;);</span>
<span class="nc bnc" id="L70" title="All 2 branches missed.">        if (assignToGame) {</span>
<span class="nc" id="L71">            gameService.getAllGames().forEach(Game::display);</span>
<span class="nc" id="L72">            long gameId = input.getNum(&quot;Game ID to assing to this tournament: &quot;);</span>
<span class="nc" id="L73">            Game game = new Game();</span>
<span class="nc" id="L74">            game.setId(gameId);</span>
<span class="nc" id="L75">            tournament.setGame(game);</span>
<span class="nc" id="L76">        } else {</span>
<span class="nc" id="L77">            String name = input.getStr(&quot;Game Name&quot;);</span>
<span class="nc" id="L78">            Difficulty difficulty = input.getEnum(&quot;Difficulty (EASY, MEDIUM, HARD)&quot;, Difficulty.class);</span>
<span class="nc" id="L79">            int duration = input.getNum(&quot;Average Match Duration&quot;);</span>
<span class="nc" id="L80">            Game newGame =  new Game(name, difficulty, duration);</span>
<span class="nc" id="L81">            tournament.setGame(newGame);</span>
        }
<span class="nc" id="L83">        tournamentService.addTournament(tournament);</span>
<span class="nc" id="L84">    }</span>

    private static void updateTournament() {
<span class="nc" id="L87">        long tournamentId = input.getNum(&quot;Enter Tournament ID to update&quot;);</span>
<span class="nc" id="L88">        Tournament tournament = tournamentService.getTournamentById(tournamentId);</span>
<span class="nc bnc" id="L89" title="All 2 branches missed.">        if (tournament == null) {</span>
<span class="nc" id="L90">            log.error(&quot;[-] Tournament with ID {} does not exist.&quot;, tournamentId);</span>
<span class="nc" id="L91">            return;</span>
        }

<span class="nc" id="L94">        String newTitle = input.getStrEvenEmpty(&quot;Enter New Tournament Title (leave empty for no change)&quot;);</span>
<span class="nc bnc" id="L95" title="All 2 branches missed.">        if (!newTitle.isEmpty()) {</span>
<span class="nc" id="L96">            tournament.setTitle(newTitle);</span>
        }

<span class="nc" id="L99">        boolean updateOtherProps = input.getYesNo(&quot;Do You Want To Update Other Properties Of This Tournament? (Y/N) :&quot;);</span>
<span class="nc bnc" id="L100" title="All 2 branches missed.">        if (updateOtherProps) {</span>
<span class="nc" id="L101">            Date startDate = input.getDate(&quot;Start Date (DD/MM/YYYY)&quot;, false);</span>
<span class="nc" id="L102">            Date endDate = null;</span>
            while (true){
<span class="nc" id="L104">                endDate = input.getDate(&quot;End Date (DD/MM/YYYY)&quot;, false);</span>
<span class="nc bnc" id="L105" title="All 2 branches missed.">                if (endDate.after(startDate)) {</span>
<span class="nc" id="L106">                    break;</span>
<span class="nc" id="L107">                } else log.warn(&quot;End date cannot be before start date.&quot;);</span>
            }
<span class="nc" id="L109">            int spectatorsCount = input.getNum(&quot;Spectators Count&quot;);</span>
<span class="nc" id="L110">            int estimatedDuration = input.getNum(&quot;Estimated Duration (in minutes)&quot;);</span>
<span class="nc" id="L111">            int matchPauseTime = input.getNum(&quot;Match Pause Time (in minutes)&quot;);</span>
<span class="nc" id="L112">            int ceremonyTime = input.getNum(&quot;Ceremony Time (in minutes)&quot;);</span>
<span class="nc" id="L113">            Status status =  input.getEnum(&quot;Status (SCHEDULED, IN_PROGRESS, COMPLETED, CANCELED)&quot;, Status.class);</span>
<span class="nc" id="L114">            tournament.setSpectatorsCount(spectatorsCount);</span>
<span class="nc" id="L115">            tournament.setEstimatedDuration(estimatedDuration);</span>
<span class="nc" id="L116">            tournament.setMatchPauseTime(matchPauseTime);</span>
<span class="nc" id="L117">            tournament.setCeremonyTime(ceremonyTime);</span>
<span class="nc" id="L118">            tournament.setStatus(status);</span>
        }
<span class="nc" id="L120">        tournamentService.updateTournament(tournament);</span>
<span class="nc" id="L121">        log.info(&quot;[+] Tournament with ID {} updated successfully.&quot;, tournamentId);</span>
<span class="nc" id="L122">    }</span>

    private static void removeTournament() {
<span class="nc" id="L125">        long tournamentId = input.getNum(&quot;Enter Tournament ID to remove&quot;);</span>
<span class="nc" id="L126">        tournamentService.removeTournament(tournamentId);</span>
<span class="nc" id="L127">        log.info(&quot;[+] Tournament with ID {} removed successfully.&quot;, tournamentId);</span>
<span class="nc" id="L128">    }</span>

    private static String menu() {
<span class="nc" id="L131">        return</span>
                &quot;\t\t-- Tournament Menu --\n&quot; +
                        &quot;\t1. Add Tournament\n&quot; +
                        &quot;\t2. View Tournaments\n&quot; +
                        &quot;\t3. Update Tournament\n&quot; +
                        &quot;\t4. Remove Tournament\n&quot; +
                        &quot;\t5. Exit\n&quot;;
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>